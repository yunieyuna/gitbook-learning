---
description: https://www.woshipm.com/pd/5466737.html
---

# 如何计算A/B测试时需要的样本量

#### 3. 实验样本及实验时长的确定

AB实验需要用到随机抽样，也就是随机从产品的用户中选择一部分，那么要选取多少呢。

想象一下，某工厂刚生产了一万件零件，现在想要测试这批零件是否合格，那么要选择多少样本进行检测呢？一件、两件还是一万件？

选择的样本太少，恐怕没有说服力；选择的样本太多，成本又太高。最好的方法其实是在满足统计学意义后，样本要尽量的少。

下面的公式给出了样本数量的计算方式，如果你看不懂，可以直接略过，知道有方法计算就好。

为确定样本数量，我们先要确定三个值，即显著性水平或第一类错误概率alpha一般取值为0.05或0.1，第二类错误概率beta，一般取值为0.1或0.2，以及实际想要达到的效果，比如点击率提升2%。

<figure><img src="../.gitbook/assets/image (242).png" alt=""><figcaption></figcaption></figure>

其中，

* Delta表示预期的提升，在这个例子中，我们期望提升2%；
* sigma表示样本方差，在比率的情况下，sigma^2=p（1-p），p是样本的某一比率，比如现在首页产品的点击率为67%；
* alpha第一类错误概率，一般取值为5%或1%；
* beta第二类错误概率，一般取值为0.1或0.2；
* z：正态分布累计概率为_x_时对应的分位数。

假设过去两周内，平均每天有50000人打开过我们的app，若分成了四组实验，每组实验的流量不一样，要保证获得流量最小的那组达到最小样本所要求的数量。

比如，流量最小那组占总流量的20%，即50000\*20%=10000，而最小样本数量为26000，因此至少需要26000/10000=3天。由于周末会影响实验，所以一般会取整周时间；同时，要考虑节假日以及特殊的事件。



1型错误（Type I Error）：False Positive

2型错误（Type II Error）：False Negative

<figure><img src="../.gitbook/assets/image (243).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (244).png" alt=""><figcaption></figcaption></figure>

